name: Retake Snapshots

on:
  pull_request:
    branches: [main]

jobs:
  take_snapshot:
    name: Take snapshot
    permissions:
      statuses: write
      pull-requests: write
      contents: write
    if: contains(github.event.head_commit.message, 'snapshot_test')
    uses: ./.github/workflows/_test.yml
    with:
      retake_snapshots: true